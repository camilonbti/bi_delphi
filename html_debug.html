<!DOCTYPE html>
<!-- saved from url=(0088)file:///C:/Projetos/D-Rio/NBTI/Porj_Desktop_BI_HTML/novo/Win32/Debug/dashboard_temp.html -->
<html lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Vendas</title>
    <script src="./html_debug_files/chart.min.js.baixados"></script>
    <style>
.kpis {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
}
.kpi-card {
    flex: 1;
    background-color: #fafafa;
    margin: 0 10px;
    padding: 15px;
    text-align: center;
    border-radius: 8px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
}
.kpi-card h2 {
    margin: 0 0 10px;
    font-size: 18px;
    color: #555;
}
.kpi-card p {
    margin: 0;
    font-size: 24px;
    font-weight: bold;
    color: #333;
}
.table-section {
    margin-top: 20px;
    background-color: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
}
.table-section h2 {
    margin-bottom: 10px;
    font-size: 20px;
    color: #555;
}
.table {
    width: 100%;
    border-collapse: collapse;
}
.table th, .table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}
.table th {
    background-color: #f4f4f4;
    font-weight: bold;
}
.pagination {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}
.pagination-btn {
    padding: 10px 15px;
    background-color: #007BFF;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}
.pagination-btn:hover {
    background-color: #0056b3;
}
.pagination-btn[disabled] {
    background-color: #ddd;
    color: #999;
    cursor: not-allowed;
}
/* charts.css */
.chart-card {
    background: white;
    border-radius: 0.5rem;
    box-shadow: 0 0.15rem 1.75rem rgba(58, 59, 69, 0.15);
    margin-bottom: 1.5rem;
    padding: 1rem;
}
.chart-card h5 {
    color: #4e73df;
    font-size: 0.875rem;
    font-weight: bold;
    text-transform: uppercase;
    margin-bottom: 0.75rem;
}
.chart-container {
    position: relative;
    width: 100%;
    height: 400px;
}
.chart-tooltip {
    position: absolute;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.875rem;
    pointer-events: none;
    opacity: 0;
    transform: translate(-50%, -100%);
    transition: opacity 0.2s ease-in-out;
}
.chart-tooltip.visible {
    opacity: 1;
}
.chart-legend {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
}
.chart-legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}
.chart-legend-item .color-box {
    width: 15px;
    height: 15px;
    border-radius: 50%;
}
.chart-footer {
    text-align: center;
    font-size: 0.875rem;
    color: #858796;
    margin-top: 1rem;
}

    </style>
</head>
<body>
<main role="main">
    <header>
        <h1>Dashboard de Vendas</h1>
    </header>
<nav class="filters" id="filtersContainer">
<div class="filter" id="filterRegion">
    <span>Região</span>
    <div class="filter-content"></div>
</div>
<div class="filter" id="filterStore">
    <span>Loja</span>
    <div class="filter-content"></div>
</div>
<div class="filter" id="filterGroup">
    <span>Grupo</span>
    <div class="filter-content"></div>
</div>
</nav>

<section class="kpis">
<article class="kpi-card" title="Total de Vendas realizadas no período selecionado.">
    <h2>Total de Vendas</h2>
    <p id="totalVendas">R$ 0,00</p>
    <div class="tooltip">Total de Vendas realizadas no período selecionado.</div>
</article>
<article class="kpi-card" title="Ticket médio das vendas no período selecionado.">
    <h2>Ticket Médio</h2>
    <p id="ticketMedio">R$ 0,00</p>
    <div class="tooltip">Ticket médio das vendas no período selecionado.</div>
</article>
<article class="kpi-card" title="Total de itens vendidos no período selecionado.">
    <h2>Total de Itens</h2>
    <p id="totalItens">0</p>
    <div class="tooltip">Total de itens vendidos no período selecionado.</div>
</article>
</section>

<section class="charts">
<div class="chart-container" id="salesByRegionContainer">
    <h3>Vendas por Região</h3>
    <div class="chart-wrapper">
        <canvas id="salesByRegion"></canvas>
    </div>
</div>
<div class="chart-container" id="salesByStoreContainer">
    <h3>Vendas por Loja</h3>
    <div class="chart-wrapper">
        <canvas id="salesByStore"></canvas>
    </div>
</div>
<div class="chart-container" id="salesByGroupContainer">
    <h3>Vendas por Grupo</h3>
    <div class="chart-wrapper">
        <canvas id="salesByGroup"></canvas>
    </div>
</div>
</section>

<section class="table-section">
    <table>
        <thead>
            <tr>
                <th>ID Pedido</th>
                <th>Produto</th>
                <th>Fornecedor</th>
                <th>Quantidade</th>
                <th>Preço de Venda</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody id="tableContent">
        </tbody>
    </table>
    <div class="pagination" id="pagination">
        <button id="prevPage" disabled="">Anterior</button>
        <button id="nextPage">Próxima</button>
    </div>
</section>
    <button id="exportButton">Exportar Dados</button>
</main>

<script>
<script>
class Dashboard {
    constructor() {
        this.dataManager = new DataManager();
        this.chartManager = new ChartManager();
        this.filterManager = new FilterManager();
        this.tableManager = new TableManager();
        this.initialize();
    }

    initialize() {
        this.dataManager.initialize(mockData);
        this.filterManager.initialize();
        this.chartManager.initialize();
        this.tableManager.initialize();
        this.setupEventListeners();
    }

    setupEventListeners() {
        document.addEventListener("filterChange", () => {
            const filteredData = this.filterManager.applyFilters(this.dataManager.getData());
            this.updateDashboard(filteredData);
        });
    }

    updateDashboard(data) {
        this.chartManager.updateCharts(data);
        this.tableManager.updateTable(data);
    }
}
class DataManager {
    constructor() {
        this.data = [];
        this.filteredData = [];
    }

    initialize(data) {
        this.data = data;
        this.filteredData = [...data];
    }

    getData() {
        return this.data;
    }

    getFilteredData() {
        return this.filteredData;
    }

    setFilteredData(data) {
        this.filteredData = data;
    }
}
class ChartManager {
    constructor() {
        this.charts = {};
    }

    initialize() {
        this.initializeCharts();
    }

    initializeCharts() {
        this.charts.region = this.createChart("salesByRegion", "bar");
        this.charts.store = this.createChart("salesByStore", "bar");
        this.charts.group = this.createChart("salesByGroup", "pie");
    }

    createChart(id, type) {
        const ctx = document.getElementById(id).getContext("2d");
        return new Chart(ctx, {
            type: type,
            data: { labels: [], datasets: [{ data: [] }] },
            options: { responsive: true, maintainAspectRatio: false }
        });
    }

    updateCharts(data) {
        this.updateRegionChart(data);
        this.updateStoreChart(data);
        this.updateGroupChart(data);
    }
}
class FilterManager {
    constructor() {
        this.filters = {
            regions: [],
            stores: [],
            groups: []
        };
    }

    initialize() {
        this.setupFilterListeners();
    }

    setupFilterListeners() {
        document.querySelectorAll(".filter").forEach(filter => {
            filter.addEventListener("click", (e) => this.handleFilterClick(e));
        });
    }

    applyFilters(data) {
        return data.filter(item => {
            return this.matchesFilters(item);
        });
    }
}
class TableManager {
    constructor() {
        this.currentPage = 1;
        this.itemsPerPage = 10;
    }

    initialize() {
        this.setupPagination();
    }

    setupPagination() {
        document.getElementById("prevPage").addEventListener("click", () => {
            if (this.currentPage > 1) {
                this.currentPage--;
                this.updateTable(this.currentData);
            }
        });

        document.getElementById("nextPage").addEventListener("click", () => {
            const maxPage = Math.ceil(this.currentData.length / this.itemsPerPage);
            if (this.currentPage < maxPage) {
                this.currentPage++;
                this.updateTable(this.currentData);
            }
        });
    }

    updateTable(data) {
        this.currentData = data;
        const start = (this.currentPage - 1) * this.itemsPerPage;
        const end = start + this.itemsPerPage;
        const pageData = data.slice(start, end);

        this.renderTableRows(pageData);
        this.updatePaginationButtons(data.length);
    }
}
document.addEventListener("DOMContentLoaded", () => {
    window.dashboard = new Dashboard();
});
</script>

const utils = {
    formatCurrency(value) {
        return new Intl.NumberFormat("pt-BR", {
            style: "currency",
            currency: "BRL"
        }).format(value);
    },

    formatNumber(value) {
        return new Intl.NumberFormat("pt-BR").format(value);
    },

    formatPercent(value) {
        return new Intl.NumberFormat("pt-BR", {
            style: "percent",
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        }).format(value);
    },

    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () =&gt; {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
};
<script>
let currentPage = 1;
const itemsPerPage = 10;
let filteredData = [...mockData];
const filters = {
    regions: [],
    stores: [],
    groups: [],
    subgroups: [],
    brands: [],
    sellers: []
};
let salesByRegionChart, salesByStoreChart, salesByGroupChart, salesBySubgroupChart, salesByBrandChart, salesBySellerChart;
const regionColors = {};
const storeColors = {};
const groupColors = {};
const subgroupColors = {};
const brandColors = {};
const sellerColors = {};
function formatCurrency(value) {
    return new Intl.NumberFormat("pt-BR", {
        style: "currency",
        currency: "BRL"
    }).format(value);
}

function assignColors(labels, colorsObject) {
    labels.forEach((label, index) => {
        if (!colorsObject[label]) {
            colorsObject[label] = colorPalette[index % colorPalette.length];
        }
    });
}

function toggleFilter(type, id) {
    const index = filters[type].indexOf(id);
    if (index > -1) {
        filters[type].splice(index, 1);
    } else {
        filters[type].push(id);
    }
    updateDashboard();
}

function updateDashboard() {
    filteredData = mockData.filter(item => {
        return (!filters.regions.length || filters.regions.includes(item.ID_REGIAO)) &&
               (!filters.stores.length || filters.stores.includes(item.ID_LOJA)) &&
               (!filters.groups.length || filters.groups.includes(item.ID_GRUPO)) &&
               (!filters.subgroups.length || filters.subgroups.includes(item.ID_SUBGRUPO)) &&
               (!filters.brands.length || filters.brands.includes(item.ID_MARCA)) &&
               (!filters.sellers.length || filters.sellers.includes(item.ID_VENDEDOR));
    });
    updateKPIs();
    updateCharts();
    updateTable();
}
function updateTable() {
    const start = (currentPage - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    const pageData = filteredData.slice(start, end);

    const tbody = document.querySelector("#tableContent");
    tbody.innerHTML = "";

    pageData.forEach(item => {
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${item.ID_PEDIDO}</td>
            <td>${item.PRODUTO}</td>
            <td>${item.MARCA}</td>
            <td style="text-align: right;">${item.QUANTIDADE}</td>
            <td style="text-align: right;">${formatCurrency(item.PRECO_VENDA)}</td>
            <td style="text-align: right;">${formatCurrency(item.SUBTOTAL)}</td>
        `;
        tbody.appendChild(row);
    });

    document.getElementById("prevPage").disabled = currentPage === 1;
    document.getElementById("nextPage").disabled = end >= filteredData.length;
}
function updateKPIs() {
    const totalVendas = filteredData.reduce((sum, item) => sum + item.SUBTOTAL, 0);
    const totalItens = filteredData.reduce((sum, item) => sum + item.QUANTIDADE, 0);
    const ticketMedio = totalVendas / filteredData.length || 0;

    document.getElementById("totalVendas").textContent = formatCurrency(totalVendas);
    document.getElementById("ticketMedio").textContent = formatCurrency(ticketMedio);
    document.getElementById("totalItens").textContent = totalItens;
}
document.addEventListener("DOMContentLoaded", () => {
    // Inicializar gráficos vazios
    salesByRegionChart = new Chart(
        document.getElementById("salesByRegionChart").getContext("2d"),
        {
            type: "bar",
            data: { labels: [], datasets: [{ label: "Vendas por Região", data: [] }] },
            options: { responsive: true, maintainAspectRatio: false }
        }
    );

    salesByGroupChart = new Chart(
        document.getElementById("salesByGroupChart").getContext("2d"),
        {
            type: "pie",
            data: { labels: [], datasets: [{ data: [] }] },
            options: { responsive: true, maintainAspectRatio: false }
        }
    );

    // Atualizar dashboard inicial
    updateDashboard();

    // Adicionar listeners de paginação
    document.getElementById("prevPage").addEventListener("click", () => {
        if (currentPage > 1) {
            currentPage--;
            updateTable();
        }
    });

    document.getElementById("nextPage").addEventListener("click", () => {
        if ((currentPage * itemsPerPage) < filteredData.length) {
            currentPage++;
            updateTable();
        }
    });
});
</script>





</body></html>